{"version":3,"file":"static/js/540.36a5a3c8.chunk.js","mappings":"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","sources":["components/search/SearchHighlighting.js"],"sourcesContent":["// src/components/search/SearchHighlighting.js\r\n// –ì—ñ–±—Ä–∏–¥–Ω–∞ –≤–µ—Ä—Å—ñ—è: –Ω–∞–π–∫—Ä–∞—â–µ –∑ –æ–±–æ—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤\r\n// –í–µ—Ä—Å—ñ—è: 2.0.0\r\n\r\nclass SearchHighlighting {\r\n    constructor() {\r\n        this.highlightClass = 'comspec-search-highlight';\r\n        this.currentHighlights = [];\r\n        this.isInitialized = false;\r\n        \r\n        this.init();\r\n    }\r\n    \r\n    /**\r\n     * –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è\r\n     */\r\n    init() {\r\n        try {\r\n            this.initializeStyles();\r\n            this.setupGlobalFunctions();\r\n            this.setupKeyboardShortcuts();\r\n            this.isInitialized = true;\r\n            // console.log('üé® SearchHighlighting —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ');\r\n        } catch (error) {\r\n            console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó SearchHighlighting:', error);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–∏–ª—ñ–≤ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è (–∑ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É + –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)\r\n     */\r\n    initializeStyles() {\r\n        const styleId = 'comspec-search-highlighting-styles';\r\n        \r\n        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —Å—Ç–∏–ª—ñ –≤–∂–µ –¥–æ–¥–∞–Ω—ñ\r\n        if (document.getElementById(styleId)) {\r\n            return;\r\n        }\r\n        \r\n        const style = document.createElement('style');\r\n        style.id = styleId;\r\n        style.textContent = `\r\n            .${this.highlightClass} {\r\n                background: #ffeb3b !important;\r\n                padding: 2px 4px !important;\r\n                border-radius: 3px !important;\r\n                font-weight: 600 !important;\r\n                animation: comspec-pulse 1s ease-in-out !important;\r\n                box-shadow: 0 0 0 2px rgba(255, 235, 59, 0.3) !important;\r\n                color: #000 !important;\r\n                transition: all 0.3s ease !important;\r\n            }\r\n            \r\n            .${this.highlightClass}:hover {\r\n                background: #ffcc00 !important;\r\n                transform: scale(1.05) !important;\r\n            }\r\n            \r\n            .${this.highlightClass}.phone {\r\n                background: #03a9f4 !important;\r\n                color: white !important;\r\n                box-shadow: 0 0 0 2px rgba(3, 169, 244, 0.3) !important;\r\n            }\r\n            \r\n            .${this.highlightClass}.address {\r\n                background: #ff9800 !important;\r\n                color: white !important;\r\n                box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.3) !important;\r\n            }\r\n            \r\n            .${this.highlightClass}.email {\r\n                background: #2196f3 !important;\r\n                color: white !important;\r\n                box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.3) !important;\r\n            }\r\n            \r\n            .comspec-search-focus {\r\n                outline: 3px solid #008080 !important;\r\n                outline-offset: 5px !important;\r\n                border-radius: 5px !important;\r\n                transition: all 0.3s ease !important;\r\n            }\r\n            \r\n            .comspec-search-counter {\r\n                position: fixed !important;\r\n                top: 10px !important;\r\n                right: 10px !important;\r\n                background: #008080 !important;\r\n                color: white !important;\r\n                padding: 8px 16px !important;\r\n                border-radius: 20px !important;\r\n                font-size: 14px !important;\r\n                font-weight: bold !important;\r\n                z-index: 10000 !important;\r\n                box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;\r\n                animation: slideInRight 0.3s ease !important;\r\n            }\r\n            \r\n            @keyframes comspec-pulse {\r\n                0%, 100% { \r\n                    background: #ffeb3b !important; \r\n                    transform: scale(1);\r\n                }\r\n                50% { \r\n                    background: #ff9800 !important; \r\n                    transform: scale(1.05);\r\n                }\r\n            }\r\n            \r\n            @keyframes slideInRight {\r\n                from {\r\n                    transform: translateX(100%);\r\n                    opacity: 0;\r\n                }\r\n                to {\r\n                    transform: translateX(0);\r\n                    opacity: 1;\r\n                }\r\n            }\r\n        `;\r\n        document.head.appendChild(style);\r\n        // console.log('üé® –°—Ç–∏–ª—ñ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ');\r\n    }\r\n\r\n    /**\r\n     * –¢–æ—á–Ω–µ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—ñ–≤ –≤ –µ–ª–µ–º–µ–Ω—Ç—ñ (–∑ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É + –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)\r\n     */\r\n    highlightTermInElement(element, term, contextType = null) {\r\n        if (!element || !term) {\r\n            console.warn('‚ö†Ô∏è –í—ñ–¥—Å—É—Ç–Ω—ñ–π –µ–ª–µ–º–µ–Ω—Ç –∞–±–æ —Ç–µ—Ä–º—ñ–Ω –¥–ª—è –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è');\r\n            return false;\r\n        }\r\n        \r\n        // console.log(`üé® –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—É \"${term}\" –≤ –µ–ª–µ–º–µ–Ω—Ç—ñ:`, element.tagName, element.className);\r\n        \r\n        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –µ–ª–µ–º–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å —Ç–µ—Ä–º—ñ–Ω\r\n        if (!element.textContent.toLowerCase().includes(term.toLowerCase())) {\r\n            // console.log(`‚ö†Ô∏è –ï–ª–µ–º–µ–Ω—Ç –Ω–µ –º—ñ—Å—Ç–∏—Ç—å —Ç–µ—Ä–º—ñ–Ω \"${term}\"`);\r\n            return false;\r\n        }\r\n        \r\n        const highlighted = this.highlightInTextNodes(element, term, contextType);\r\n        \r\n        if (highlighted) {\r\n            // –î–æ–¥–∞—î–º–æ –¥–æ –º–∞—Å–∏–≤—É –ø–æ—Ç–æ—á–Ω–∏—Ö –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω—å\r\n            const highlights = element.querySelectorAll(`.${this.highlightClass}`);\r\n            this.currentHighlights.push(...Array.from(highlights));\r\n        }\r\n        \r\n        return highlighted;\r\n    }\r\n\r\n    /**\r\n     * –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –≤—É–∑–ª—ñ–≤ (–ø–æ–∫—Ä–∞—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)\r\n     */\r\n    highlightInTextNodes(node, searchTerm, contextType = null) {\r\n        if (node.nodeType === Node.TEXT_NODE) {\r\n            const text = node.textContent;\r\n            const regex = new RegExp(`(${searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n            \r\n            if (regex.test(text)) {\r\n                const contextClass = contextType ? ` ${contextType}` : '';\r\n                const highlightedHTML = text.replace(regex, \r\n                    `<span class=\"${this.highlightClass}${contextClass}\" data-search-highlight=\"true\">$1</span>`\r\n                );\r\n                \r\n                const tempDiv = document.createElement('div');\r\n                tempDiv.innerHTML = highlightedHTML;\r\n                \r\n                // –ó–∞–º—ñ–Ω—é—î–º–æ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –≤—É–∑–æ–ª –Ω–∞ –ø—ñ–¥—Å–≤—ñ—á–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏\r\n                const parent = node.parentNode;\r\n                if (parent) {\r\n                    while (tempDiv.firstChild) {\r\n                        parent.insertBefore(tempDiv.firstChild, node);\r\n                    }\r\n                    parent.removeChild(node);\r\n                }\r\n                return true;\r\n            }\r\n        } else if (node.nodeType === Node.ELEMENT_NODE && \r\n                   !node.classList.contains(this.highlightClass)) {\r\n            // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–æ–±–ª—è—î–º–æ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏\r\n            let highlighted = false;\r\n            const children = Array.from(node.childNodes);\r\n            children.forEach(child => {\r\n                if (this.highlightInTextNodes(child, searchTerm, contextType)) {\r\n                    highlighted = true;\r\n                }\r\n            });\r\n            return highlighted;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –¥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –∑ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è–º (–ø–æ–∫—Ä–∞—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è –∑ —Ç–æ—á–Ω–∏–º –∑–±—ñ–≥–æ–º)\r\n     */\r\n    scrollToElementWithHighlight(selector, term, context = null, directElement = null, exactTitle = null) {\r\n        // console.log(`üéØ scrollToElementWithHighlight –≤–∏–∫–ª–∏–∫–∞–Ω–æ:`, {selector, term, context, exactTitle});\r\n        \r\n        // –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—î –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è\r\n        this.clearHighlights();\r\n        \r\n        let targetElement = directElement;\r\n        if (!targetElement) {\r\n            targetElement = this.findElement(selector, term, exactTitle);\r\n        }\r\n        \r\n        if (!targetElement) {\r\n            // console.log(`‚ùå –ï–ª–µ–º–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞: ${selector}, term: ${term}, exactTitle: ${exactTitle}`);\r\n            return false;\r\n        }\r\n\r\n        // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è\r\n        const highlighted = this.applyHighlighting(targetElement, term, context);\r\n        \r\n        // –ü—Ä–æ–∫—Ä—É—á—É—î–º–æ –¥–æ –µ–ª–µ–º–µ–Ω—Ç–∞\r\n        this.scrollToElement(targetElement);\r\n        \r\n        // –ü–æ–∫–∞–∑—É—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫\r\n        if (highlighted && this.currentHighlights.length > 0) {\r\n            this.showHighlightCounter(this.currentHighlights.length, term);\r\n        }\r\n        \r\n        // console.log(`‚úÖ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è: ${highlighted ? '–∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ' : '–Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ'}`);\r\n        \r\n        return {\r\n            element: targetElement,\r\n            highlighted: highlighted,\r\n            selector: selector,\r\n            term: term,\r\n            highlightCount: this.currentHighlights.length\r\n        };\r\n    }\r\n\r\n    /**\r\n     * –ü–æ—à—É–∫ –µ–ª–µ–º–µ–Ω—Ç–∞ –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–∏–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º —Ç–æ—á–Ω–æ–≥–æ –∑–±—ñ–≥—É\r\n     */\r\n    findElement(selector, term, exactTitle = null) {\r\n        const searchMethods = [\r\n            // –í–∞—à—ñ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ –º–µ—Ç–æ–¥–∏\r\n            () => document.querySelector(selector),\r\n            () => document.getElementById(selector.replace('#', '')),\r\n            () => document.querySelector(`[data-section=\"${selector.replace('#', '')}\"]`),\r\n            () => document.querySelector(`[id*=\"${selector.replace('#', '')}\"]`),\r\n            \r\n            // –ü–æ–∫—Ä–∞—â–µ–Ω—ñ –º–µ—Ç–æ–¥–∏ –∑ —Ç–æ—á–Ω–∏–º –∑–±—ñ–≥–æ–º\r\n            () => document.querySelector(`[class*=\"${selector.replace('.', '')}\"]`),\r\n            \r\n            // –ù–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥: —Å–ø–æ—á–∞—Ç–∫—É —à—É–∫–∞—î–º–æ —Ç–æ—á–Ω–∏–π –∑–±—ñ–≥ –∑–∞–≥–æ–ª–æ–≤–∫—É\r\n            () => {\r\n                if (exactTitle) {\r\n                    const headings = Array.from(document.querySelectorAll('h1, h2, h3, h4, h5, h6'));\r\n                    return headings.find(el => \r\n                        el.textContent.trim().toLowerCase() === exactTitle.toLowerCase()\r\n                    );\r\n                }\r\n                return null;\r\n            },\r\n            \r\n            () => {\r\n                if (exactTitle) {\r\n                    const elements = Array.from(document.querySelectorAll('p, div, span, article, section, .product-card h3, .card-title'));\r\n                    return elements.find(el => \r\n                        el.textContent.trim().toLowerCase() === exactTitle.toLowerCase()\r\n                    );\r\n                }\r\n                return null;\r\n            },\r\n            \r\n            // –ü–æ—à—É–∫ –∑ –≤–∏—Å–æ–∫–æ—é –ø–æ–¥—ñ–±–Ω—ñ—Å—Ç—é (—è–∫—â–æ —Ç–æ—á–Ω–∏–π –∑–±—ñ–≥ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ)\r\n            () => {\r\n                const headings = Array.from(document.querySelectorAll('h1, h2, h3, h4, h5, h6'));\r\n                return this.findBestMatchingElement(headings, term, exactTitle);\r\n            },\r\n            \r\n            () => {\r\n                const elements = Array.from(document.querySelectorAll('p, div, span, article, section, .product-card, .card'));\r\n                return this.findBestMatchingElement(elements, term, exactTitle);\r\n            },\r\n            \r\n            // –ü–æ—à—É–∫ –ø–æ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö (–∑–∞–ª–∏—à–∞—î–º–æ —è–∫ fallback)\r\n            () => {\r\n                const elements = Array.from(document.querySelectorAll('[title], [alt], [aria-label]'));\r\n                return elements.find(el => {\r\n                    const searchText = (el.title || el.alt || el.getAttribute('aria-label') || '').toLowerCase();\r\n                    return searchText.includes(term.toLowerCase());\r\n                });\r\n            }\r\n        ];\r\n        \r\n        for (let i = 0; i < searchMethods.length; i++) {\r\n            try {\r\n                const element = searchMethods[i]();\r\n                if (element) {\r\n                    // console.log(`‚úÖ –ï–ª–µ–º–µ–Ω—Ç –∑–Ω–∞–π–¥–µ–Ω–æ –º–µ—Ç–æ–¥–æ–º ${i + 1}:`, element.tagName, element.className || element.id);\r\n                    // console.log(`üìç –¢–µ–∫—Å—Ç –µ–ª–µ–º–µ–Ω—Ç–∞: \"${element.textContent.trim()}\"`);\r\n                    return element;\r\n                }\r\n            } catch (error) {\r\n                // console.log(`‚ùå –ú–µ—Ç–æ–¥ ${i + 1} –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–≤:`, error.message);\r\n            }\r\n        }\r\n        \r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–æ–≥–æ –∑–±—ñ–≥—É —Å–µ—Ä–µ–¥ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤\r\n     */\r\n    findBestMatchingElement(elements, term, exactTitle) {\r\n        if (!elements.length) return null;\r\n        \r\n        const candidates = elements.filter(el => {\r\n            const text = el.textContent.toLowerCase();\r\n            return text.includes(term.toLowerCase());\r\n        });\r\n        \r\n        if (!candidates.length) return null;\r\n        \r\n        // –Ø–∫—â–æ –º–∞—î–º–æ —Ç–æ—á–Ω–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∑–Ω–∞—Ö–æ–¥–∏–º–æ –Ω–∞–π–∫—Ä–∞—â–∏–π –∑–±—ñ–≥\r\n        if (exactTitle) {\r\n            const exactMatch = candidates.find(el => \r\n                el.textContent.trim().toLowerCase() === exactTitle.toLowerCase()\r\n            );\r\n            if (exactMatch) return exactMatch;\r\n            \r\n            // –®—É–∫–∞—î–º–æ –Ω–∞–π–∫—Ä–∞—â–∏–π —á–∞—Å—Ç–∫–æ–≤–∏–π –∑–±—ñ–≥\r\n            return candidates.reduce((best, current) => {\r\n                const bestSimilarity = this.calculateTextSimilarity(best.textContent, exactTitle);\r\n                const currentSimilarity = this.calculateTextSimilarity(current.textContent, exactTitle);\r\n                return currentSimilarity > bestSimilarity ? current : best;\r\n            });\r\n        }\r\n        \r\n        // –Ø–∫—â–æ –Ω–µ–º–∞—î —Ç–æ—á–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫—É, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–µ—Ä—à–∏–π –∑–±—ñ–≥\r\n        return candidates[0];\r\n    }\r\n\r\n    /**\r\n     * –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥—ñ–±–Ω–æ—Å—Ç—ñ —Ç–µ–∫—Å—Ç—É (–ø—Ä–æ—Å—Ç–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º)\r\n     */\r\n    calculateTextSimilarity(text1, text2) {\r\n        const t1 = text1.toLowerCase().trim();\r\n        const t2 = text2.toLowerCase().trim();\r\n        \r\n        if (t1 === t2) return 1;\r\n        \r\n        const words1 = t1.split(/\\s+/);\r\n        const words2 = t2.split(/\\s+/);\r\n        \r\n        const commonWords = words1.filter(word => words2.includes(word));\r\n        const totalWords = Math.max(words1.length, words2.length);\r\n        \r\n        return commonWords.length / totalWords;\r\n    }\r\n\r\n    /**\r\n     * –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –¥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ (–ø–æ–∫—Ä–∞—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)\r\n     */\r\n    applyHighlighting(targetElement, term, context) {\r\n        let highlightApplied = false;\r\n\r\n        // –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É\r\n        const contextType = this.determineContextType(context, term);\r\n\r\n        // –ü—ñ–¥—Å–≤—ñ—á—É—î–º–æ –æ—Å–Ω–æ–≤–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç\r\n        if (this.highlightTermInElement(targetElement, term, contextType)) {\r\n            highlightApplied = true;\r\n            // console.log(`‚úÖ –ü—ñ–¥—Å–≤—ñ—á–µ–Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –µ–ª–µ–º–µ–Ω—Ç—ñ`);\r\n        }\r\n        \r\n        // –ü—ñ–¥—Å–≤—ñ—á—É—î–º–æ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏\r\n        const elementsToHighlight = targetElement.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, div, a, li, td, th');\r\n        let childHighlights = 0;\r\n        \r\n        elementsToHighlight.forEach(el => {\r\n            if (el.textContent.toLowerCase().includes(term.toLowerCase())) {\r\n                if (this.highlightTermInElement(el, term, contextType)) {\r\n                    highlightApplied = true;\r\n                    childHighlights++;\r\n                }\r\n            }\r\n        });\r\n        \r\n        if (childHighlights > 0) {\r\n            // console.log(`‚úÖ –ü—ñ–¥—Å–≤—ñ—á–µ–Ω–æ –≤ ${childHighlights} –¥–æ—á—ñ—Ä–Ω—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç–∞—Ö`);\r\n        }\r\n        \r\n        return highlightApplied;\r\n    }\r\n\r\n    /**\r\n     * –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É\r\n     */\r\n    determineContextType(context, term) {\r\n        // –Ø–∫—â–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞–Ω–æ —è–∫ —Ä—è–¥–æ–∫\r\n        if (typeof context === 'string') {\r\n            return context;\r\n        }\r\n        \r\n        // –Ø–∫—â–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç - –æ–±'—î–∫—Ç\r\n        if (context && typeof context === 'object') {\r\n            if (context.field === 'phone' || context.fieldLabel === '–¢–µ–ª–µ—Ñ–æ–Ω') return 'phone';\r\n            if (context.field === 'address' || context.fieldLabel === '–ê–¥—Ä–µ—Å–∞') return 'address';\r\n            if (context.field === 'email' || context.fieldLabel === 'Email') return 'email';\r\n        }\r\n        \r\n        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ —Ç–µ—Ä–º—ñ–Ω—É\r\n        if (/(\\+?3?8?[\\s-]?\\(?0\\d{2}\\)?[\\s-]?\\d{3}[\\s-]?\\d{2}[\\s-]?\\d{2})|(\\d{3}[\\s-]?\\d{2}[\\s-]?\\d{2})/.test(term)) {\r\n            return 'phone';\r\n        }\r\n        \r\n        if (/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/.test(term)) {\r\n            return 'email';\r\n        }\r\n        \r\n        if (term.toLowerCase().includes('–∫–∏—ó–≤') || term.toLowerCase().includes('—É–∫—Ä–∞—ó–Ω') ||\r\n            term.toLowerCase().includes('–æ–±–ª–∞—Å—Ç—å') || term.toLowerCase().includes('–≤—É–ª.')) {\r\n            return 'address';\r\n        }\r\n        \r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * –ü—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—è –¥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ (–∑ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É)\r\n     */\r\n    scrollToElement(element) {\r\n        const scrollOptions = {\r\n            behavior: 'smooth',\r\n            block: 'center',\r\n            inline: 'nearest'\r\n        };\r\n        \r\n        element.scrollIntoView(scrollOptions);\r\n        \r\n        // –î–æ–¥–∞—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é —Ñ–æ–∫—É—Å–∞\r\n        element.classList.add('comspec-search-focus');\r\n        \r\n        setTimeout(() => {\r\n            element.classList.remove('comspec-search-focus');\r\n        }, 3000);\r\n    }\r\n\r\n    /**\r\n     * –û—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω—å (–∑ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É + –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)\r\n     */\r\n    clearHighlights() {\r\n        const highlights = document.querySelectorAll(`.${this.highlightClass}`);\r\n        // console.log(`üßπ –û—á–∏—â–µ–Ω–Ω—è ${highlights.length} –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω—å`);\r\n        \r\n        highlights.forEach(highlight => {\r\n            const parent = highlight.parentNode;\r\n            if (parent) {\r\n                const textContent = highlight.textContent;\r\n                const textNode = document.createTextNode(textContent);\r\n                parent.replaceChild(textNode, highlight);\r\n                parent.normalize();\r\n            }\r\n        });\r\n        \r\n        // –û—á–∏—â–∞—î–º–æ –º–∞—Å–∏–≤ –ø–æ—Ç–æ—á–Ω–∏—Ö –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω—å\r\n        this.currentHighlights = [];\r\n        \r\n        // –í–∏–¥–∞–ª—è—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫\r\n        this.hideHighlightCounter();\r\n        \r\n        return highlights.length;\r\n    }\r\n\r\n    /**\r\n     * –ü–æ–∫–∞–∑–∞—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è (–≤—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ UI)\r\n     */\r\n    showHighlightCounter(count, query) {\r\n        // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É\r\n        return;\r\n    }\r\n\r\n    /**\r\n     * –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è\r\n     */\r\n    hideHighlightCounter() {\r\n        const counter = document.getElementById('comspec-highlight-counter');\r\n        if (counter) {\r\n            counter.remove();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –ø—ñ–¥—Å–≤—ñ—á–µ–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º\r\n     */\r\n    navigateHighlights(direction = 'next') {\r\n        if (this.currentHighlights.length === 0) {\r\n            console.warn('‚ö†Ô∏è –ù–µ–º–∞—î –ø—ñ–¥—Å–≤—ñ—á–µ–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó');\r\n            return false;\r\n        }\r\n        \r\n        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –∞–∫—Ç–∏–≤–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç\r\n        let currentIndex = this.currentHighlights.findIndex(el => \r\n            el.classList.contains('comspec-search-focus')\r\n        );\r\n        \r\n        // –Ø–∫—â–æ –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ–≥–æ, –ø–æ—á–∏–Ω–∞—î–º–æ –∑ –ø–µ—Ä—à–æ–≥–æ\r\n        if (currentIndex === -1) {\r\n            currentIndex = direction === 'next' ? -1 : this.currentHighlights.length;\r\n        }\r\n        \r\n        // –û–±—á–∏—Å–ª—é—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —ñ–Ω–¥–µ–∫—Å\r\n        let nextIndex;\r\n        if (direction === 'next') {\r\n            nextIndex = (currentIndex + 1) % this.currentHighlights.length;\r\n        } else {\r\n            nextIndex = currentIndex === 0 ? this.currentHighlights.length - 1 : currentIndex - 1;\r\n        }\r\n        \r\n        // –í–∏–¥–∞–ª—è—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ñ–æ–∫—É—Å\r\n        if (currentIndex >= 0 && this.currentHighlights[currentIndex]) {\r\n            this.currentHighlights[currentIndex].classList.remove('comspec-search-focus');\r\n        }\r\n        \r\n        // –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞\r\n        const targetElement = this.currentHighlights[nextIndex];\r\n        if (targetElement) {\r\n            this.scrollToElement(targetElement);\r\n            \r\n            // console.log(`üìç –ù–∞–≤—ñ–≥–∞—Ü—ñ—è: ${nextIndex + 1}/${this.currentHighlights.length}`);\r\n            return true;\r\n        }\r\n        \r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω—ñ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è\r\n     */\r\n    setupKeyboardShortcuts() {\r\n        document.addEventListener('keydown', (e) => {\r\n            // F3 –∞–±–æ Ctrl+G –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –≤–ø–µ—Ä–µ–¥\r\n            if (e.key === 'F3' || (e.ctrlKey && e.key === 'g')) {\r\n                e.preventDefault();\r\n                this.navigateHighlights('next');\r\n            }\r\n            \r\n            // Shift+F3 –∞–±–æ Ctrl+Shift+G –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –Ω–∞–∑–∞–¥\r\n            if ((e.shiftKey && e.key === 'F3') || (e.ctrlKey && e.shiftKey && e.key === 'G')) {\r\n                e.preventDefault();\r\n                this.navigateHighlights('prev');\r\n            }\r\n            \r\n            // Escape –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è\r\n            if (e.key === 'Escape') {\r\n                this.clearHighlights();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π\r\n     */\r\n    setupGlobalFunctions() {\r\n        // –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (–∑–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–∞—à—ñ –Ω–∞–∑–≤–∏)\r\n        window.highlightSearchResults = (query, results, options) => {\r\n            return this.highlight(query, options);\r\n        };\r\n        \r\n        window.clearSearchHighlights = (container) => {\r\n            return this.clearHighlights(container);\r\n        };\r\n        \r\n        window.navigateToResult = (resultData, highlightQuery) => {\r\n            return this.scrollToElementWithHighlight(\r\n                resultData.selector || 'body', \r\n                highlightQuery || resultData.text || '', \r\n                resultData.context,\r\n                resultData.element\r\n            );\r\n        };\r\n        \r\n        // –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó\r\n        window.navigateNextHighlight = () => {\r\n            return this.navigateHighlights('next');\r\n        };\r\n        \r\n        window.navigatePrevHighlight = () => {\r\n            return this.navigateHighlights('prev');\r\n        };\r\n        \r\n        // –î–æ–¥–∞—î–º–æ –¥–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞\r\n        window.SearchHighlighting = this;\r\n        window.searchHighlighting = this;\r\n        \r\n        // console.log('üé® –ì–ª–æ–±–∞–ª—å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ');\r\n    }\r\n\r\n    /**\r\n     * –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –∑ –æ–ø—Ü—ñ—è–º–∏ (–¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ)\r\n     */\r\n    highlight(query, options = {}) {\r\n        const {\r\n            container = document.body\r\n        } = options;\r\n        \r\n        return this.highlightTermInElement(container, query);\r\n    }\r\n\r\n    /**\r\n     * –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è (–∑ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É + –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)\r\n     */\r\n    test(queries = ['–ø—ñ—Å–æ–∫', '044', '–¥–æ—Å—Ç–∞–≤–∫–∞', 'COMSPEC']) {\r\n        console.log('üß™ –¢–µ—Å—Ç –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è...');\r\n        \r\n        queries.forEach((query, index) => {\r\n            setTimeout(() => {\r\n                // console.log(`üîç –¢–µ—Å—Ç \"${query}\"`);\r\n                this.scrollToElementWithHighlight('body', query);\r\n                \r\n                if (index === queries.length - 1) {\r\n                    setTimeout(() => this.clearHighlights(), 3000);\r\n                }\r\n            }, index * 2000);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è\r\n     */\r\n    diagnose() {\r\n        const diagnostics = {\r\n            isInitialized: this.isInitialized,\r\n            stylesInjected: !!document.getElementById('comspec-search-highlighting-styles'),\r\n            currentHighlights: this.currentHighlights.length,\r\n            globalFunctionsAvailable: {\r\n                highlightSearchResults: !!window.highlightSearchResults,\r\n                clearSearchHighlights: !!window.clearSearchHighlights,\r\n                navigateToResult: !!window.navigateToResult\r\n            }\r\n        };\r\n        \r\n        // console.log('üî¨ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SearchHighlighting:', diagnostics);\r\n        return diagnostics;\r\n    }\r\n}\r\n\r\n// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ\r\nlet searchHighlightingInstance = null;\r\n\r\nfunction initializeSearchHighlighting() {\r\n    if (!searchHighlightingInstance) {\r\n        searchHighlightingInstance = new SearchHighlighting();\r\n        \r\n        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ contextSearch (—è–∫—â–æ —ñ—Å–Ω—É—î)\r\n        if (window.contextSearch) {\r\n            Object.assign(window.contextSearch, {\r\n                highlightTermInElement: searchHighlightingInstance.highlightTermInElement.bind(searchHighlightingInstance),\r\n                scrollToElementWithHighlight: searchHighlightingInstance.scrollToElementWithHighlight.bind(searchHighlightingInstance),\r\n                clearHighlights: searchHighlightingInstance.clearHighlights.bind(searchHighlightingInstance),\r\n                testHighlighting: searchHighlightingInstance.test.bind(searchHighlightingInstance),\r\n                \r\n                // –ü—Å–µ–≤–¥–æ–Ω—ñ–º–∏ (–∑–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–∞—à—ñ)\r\n                highlight: searchHighlightingInstance.highlightTermInElement.bind(searchHighlightingInstance),\r\n                navigate: searchHighlightingInstance.scrollToElementWithHighlight.bind(searchHighlightingInstance),\r\n                clear: searchHighlightingInstance.clearHighlights.bind(searchHighlightingInstance)\r\n            });\r\n        }\r\n        \r\n        // console.log('‚úÖ SearchHighlighting –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è');\r\n    }\r\n    return searchHighlightingInstance;\r\n}\r\n\r\n// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ DOM\r\nif (typeof window !== 'undefined') {\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', initializeSearchHighlighting);\r\n    } else {\r\n        initializeSearchHighlighting();\r\n    }\r\n}\r\n\r\n// –ï–∫—Å–ø–æ—Ä—Ç –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ (–∑–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–∞—à—ñ)\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = SearchHighlighting;\r\n}\r\n\r\n// ES6 –µ–∫—Å–ø–æ—Ä—Ç\r\nexport default SearchHighlighting;\r\nexport { initializeSearchHighlighting };\r\n\r\n// console.log('‚úÖ SearchHighlighting –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!');"],"names":["SearchHighlighting","constructor","this","highlightClass","currentHighlights","isInitialized","init","initializeStyles","setupGlobalFunctions","setupKeyboardShortcuts","error","console","styleId","document","getElementById","style","createElement","id","textContent","concat","head","appendChild","highlightTermInElement","element","term","contextType","arguments","length","undefined","warn","toLowerCase","includes","highlighted","highlightInTextNodes","highlights","querySelectorAll","push","Array","from","node","searchTerm","nodeType","Node","TEXT_NODE","text","regex","RegExp","replace","test","contextClass","highlightedHTML","tempDiv","innerHTML","parent","parentNode","firstChild","insertBefore","removeChild","ELEMENT_NODE","classList","contains","childNodes","forEach","child","scrollToElementWithHighlight","selector","context","directElement","exactTitle","clearHighlights","targetElement","findElement","applyHighlighting","scrollToElement","showHighlightCounter","highlightCount","searchMethods","querySelector","find","el","trim","headings","findBestMatchingElement","elements","title","alt","getAttribute","i","candidates","filter","exactMatch","reduce","best","current","bestSimilarity","calculateTextSimilarity","text1","text2","t1","t2","words1","split","words2","commonWords","word","totalWords","Math","max","highlightApplied","determineContextType","elementsToHighlight","field","fieldLabel","scrollIntoView","behavior","block","inline","add","setTimeout","remove","highlight","textNode","createTextNode","replaceChild","normalize","hideHighlightCounter","count","query","counter","navigateHighlights","direction","nextIndex","currentIndex","findIndex","addEventListener","e","key","ctrlKey","preventDefault","shiftKey","window","highlightSearchResults","results","options","clearSearchHighlights","container","navigateToResult","resultData","highlightQuery","navigateNextHighlight","navigatePrevHighlight","searchHighlighting","body","queries","log","index","diagnose","stylesInjected","globalFunctionsAvailable","searchHighlightingInstance","initializeSearchHighlighting","contextSearch","Object","assign","bind","testHighlighting","navigate","clear","readyState","module","exports"],"sourceRoot":""}